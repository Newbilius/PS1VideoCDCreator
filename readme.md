В этом репозитории живёт скрипт, позволяющий из почти любого видео-файла в пару кликов создать образ диска с видео-плеером, причём диск будет работать на любой редакции первой PlayStation БЕЗ использования VideoCD аддона.

Свежую версию можно скачать [в релизах.](https://github.com/Newbilius/PS1VideoCDCreator/releases)

Пример созданного таким образом диска можно [скачать тут.](https://github.com/Newbilius/PS1VideoCDCreator/releases/download/v1.0/ExampleVideoCD_Old_Hard_89.7z)

# Особенности

* В данный момент скрипт работает только по Windows, т.к. утилиту для конвертирования видео в формат STR я нашёл только для этой ОС. Работоспособность скрипта проверялась под Windows 10 (x64).

* Консоль выдаёт картинку в формате 4:3, если скрипту дать видео с другим соотношением сторон - в видео будут автоматически добавлены чёрные полосы.

* Использованные плееры не умеют ставить воспроизведение на паузу, только перематывать видео вперёд и назад крестовиной геймпада. Для паузы можно использовать воркэраунд: если открыть крышку консоли - воспроизведение поставится на паузу, а после закрытия - продолжится с момента остановки.

* По окончанию воспроизведения плеер зависает.

* Для временных файлов может понадобиться до 4 ГБ на диске со скриптом.

* Максимальная длина видео - 32 минуты. Если попытаться сконвертировать видео длиннее 32 минут - в образ попадут только первые 32 минуты.

* Видео конвертируется в разрешение 320x240 с 15 кадрами в секунду и моно-звуком с дискретизацией 37.8 кГц. В принципе консоль поддерживает до 30 кадров в секунду и стерео-звук, но в такой ситуации снижается общий битрейт видео, как следствие - повышается число артефактов сжатия.

* Образ создаётся для стандарта PAL. Второй плеер имеет версию для NTSC, но скрипт готовился в первую очередь для себя, а у нас в стране в ходу были чипованные консоли, работающие с любым регионом.

# Инструкция по использованию

* Перетащите видео-файл на файл скрипта - откроется консоль, в которой будет показан прогресс конвертирования видео

![turoial 01](ReadmePics/tutorial_2_01.png)

* Если видео длинное - процесс создания образа может долго стоять на надписи "Wait (Movie Converter)". Это нормально, ничего не зависло, прогресс на самом деле идёт - закрывать окно скрипта не нужно!

![turoial 02](ReadmePics/tutorial_2_02.png)

* Дождитесь окончания процесса создания диска. Если всё прошло успешно - в папке со скриптом появится пара файлов MOVIE.CUE и MOVIE.BIN, которые можно нарезать на болванку или открыть в эмуляторе консоли.

![turoial 03](ReadmePics/tutorial_2_03.png)

# Два плеера

В зависимости от длины видео скрипт собирает образ с одним из двух плееров.

| Параметр | до 9 минут 54 секунд | от 9 минут 55 секунд до 32 минут |
| --- | --- | --- |
| Нажатие кнопки (X) на геймпаде | Зависание консоли | Выход в меню |
| Действие после вставки диска в консоль | Автоматический старт видео | Вход в меню такого вида. Цифры в меню - минуты, с которой начнётся воспроизведение. Меню никак не меняется даже если видео существенно короче 32 минут ![menu](ReadmePics/menu.png) |
| Другое | - | Исходный файл разбивается на 4 части по 8 минут каждая, на стыках между частями возможно небольшое "спотыкание" видео или звука|

# Задействованные утилиты

- [FFmpeg](https://ffmpeg.org/download.html#build-windows)
- [MKPSXISO](https://github.com/Lameguy64/mkpsxiso) 1.23
- Movie Converter 3.4

# Дополнительные утилиты и полезные ссылки

Часть данных по ссылкам на всякий случай сохранена в директории **Documents And Utilities** этого репозитория.

* [Руководство по ручной сборке видео-дисков для PS1](https://www.emu-land.net/forum/index.php/topic,24926.30.html)

* [img2tim](https://github.com/Lameguy64/img2tim) - конвертер изображений из BMP в формат TIM, может пригодиться для кастомизации внешнего вида второго плеера. 

* [Подробное описание формата STR](https://github.com/m35/jpsxdec/blob/readme/jpsxdec/PlayStation1_STR_format.txt)

* [SDK и IDE](http://www.psxdev.net/downloads.html) для разработки игр и приложений для PS1

* [Обсуждение конвертирования видео в формат STR - на русском](http://psxplanet.ru/forum/showthread.php?t=23877)

* [Инструкция по конвертированию видео в формат STR - на английском](http://www.psxdev.net/forum/viewtopic.php?t=277)

* [Исходники](http://www.psxdev.net/forum/viewtopic.php?f=64&t=507) простого запускаемого на PS1 плеера для STR-видео

* [Краткая информация по MDEC на русском](http://wiki.psxdev.ru/index.php/MDEC)

* [Как в FFmpeg автоматически добавлять чёрные полосы](https://trac.ffmpeg.org/wiki/Scaling)